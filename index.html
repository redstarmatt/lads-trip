<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Lads, Lads, Lads!">
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="./images/icon-192.png">
    <title>Lads, Lads, Lads!</title>
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>
</head>
<body>
    <!-- Name Selection Screen -->
    <div id="select-screen" class="screen active">
        <div class="backdrop"></div>
        <div class="select-content">
            <div class="logo-container">
                <h1 class="app-title">Lads, Lads, Lads!</h1>
                <p class="subtitle">Verona & Florence 2026</p>
                <p class="dates">26-29 January</p>
            </div>
            <p class="select-prompt">Who are you?</p>
            <div class="lads-grid">
                <button class="lad-card" data-lad="matt" onclick="selectLad('matt')">
                    <div class="lad-photo" id="photo-matt"></div>
                    <span class="lad-name">Matt</span>
                </button>
                <button class="lad-card" data-lad="ken" onclick="selectLad('ken')">
                    <div class="lad-photo" id="photo-ken"></div>
                    <span class="lad-name">Ken</span>
                </button>
                <button class="lad-card" data-lad="chris" onclick="selectLad('chris')">
                    <div class="lad-photo" id="photo-chris"></div>
                    <span class="lad-name">Chris</span>
                </button>
                <button class="lad-card" data-lad="andy" onclick="selectLad('andy')">
                    <div class="lad-photo" id="photo-andy"></div>
                    <span class="lad-name">Andy</span>
                </button>
                <button class="lad-card" data-lad="mark" onclick="selectLad('mark')">
                    <div class="lad-photo" id="photo-mark"></div>
                    <span class="lad-name">Mark</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="main-screen" class="screen">
        <header class="app-header">
            <button id="back-btn" class="back-btn">&larr;</button>
            <h2 id="welcome-msg">Welcome, Matt!</h2>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="itinerary">Overview</button>
            <button class="tab-btn" data-tab="flights">Flights</button>
            <button class="tab-btn" data-tab="trains">Trains</button>
            <button class="tab-btn" data-tab="football">Football</button>
            <button class="tab-btn" data-tab="accommodation">Stay</button>
            <button class="tab-btn" data-tab="costs">Costs</button>
            <button class="tab-btn" data-tab="bclc">BCLC</button>
        </nav>

        <main class="content">
            <!-- Itinerary Tab -->
            <section id="itinerary" class="tab-content active">
                <div class="itinerary-day">
                    <div class="day-header">
                        <span class="day-date">Mon 26 Jan</span>
                        <span class="day-title">Arrival Day</span>
                    </div>
                    <div class="day-items">
                        <div class="timeline-item flight">
                            <span class="time">06:20</span>
                            <span class="desc">Fly Gatwick ‚Üí Verona (BA2590)</span>
                        </div>
                        <div class="timeline-item">
                            <span class="time">~09:40</span>
                            <span class="desc">Arrive Verona Villafranca</span>
                        </div>
                        <div class="timeline-item accommodation">
                            <span class="time">15:00</span>
                            <span class="desc">Check in - Via Mazzanti 7, Verona</span>
                        </div>
                        <div class="timeline-item football">
                            <span class="time">19:45</span>
                            <span class="desc">Hellas Verona vs Udinese</span>
                        </div>
                    </div>
                </div>

                <div class="itinerary-day">
                    <div class="day-header">
                        <span class="day-date">Tue 27 Jan</span>
                        <span class="day-title">Florence Day</span>
                    </div>
                    <div class="day-items">
                        <div class="timeline-item train">
                            <span class="time">14:22</span>
                            <span class="desc">Italo train to Florence (arr 15:54)</span>
                        </div>
                        <div class="timeline-item accommodation">
                            <span class="time">15:00</span>
                            <span class="desc">Check in - La Mantellate, Florence</span>
                        </div>
                        <div class="timeline-item football">
                            <span class="time">21:00</span>
                            <span class="desc">Fiorentina vs Como (Coppa Italia)</span>
                        </div>
                    </div>
                </div>

                <div class="itinerary-day">
                    <div class="day-header">
                        <span class="day-date">Wed 28 Jan</span>
                        <span class="day-title">Free Day</span>
                    </div>
                    <div class="day-items">
                        <div class="timeline-item">
                            <span class="time">All day</span>
                            <span class="desc">Explore Florence</span>
                        </div>
                    </div>
                </div>

                <div class="itinerary-day">
                    <div class="day-header">
                        <span class="day-date">Thu 29 Jan</span>
                        <span class="day-title">Home</span>
                    </div>
                    <div class="day-items">
                        <div class="timeline-item flight">
                            <span class="time">13:20</span>
                            <span class="desc">Fly Florence ‚Üí Gatwick (VY6206)</span>
                        </div>
                        <div class="timeline-item">
                            <span class="time">14:40</span>
                            <span class="desc">Arrive London Gatwick</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Flights Tab -->
            <section id="flights" class="tab-content">
                <div class="card flight-card">
                    <div class="card-header">
                        <span class="card-label">Outbound</span>
                        <span class="card-date">Mon 26 Jan 2026</span>
                    </div>
                    <div class="flight-route">
                        <div class="airport">
                            <span class="code">LGW</span>
                            <span class="city">London Gatwick</span>
                            <span class="terminal">Terminal S</span>
                        </div>
                        <div class="flight-line">
                            <span class="plane-icon">‚úà</span>
                        </div>
                        <div class="airport">
                            <span class="code">VRN</span>
                            <span class="city">Verona</span>
                            <span class="terminal">Villafranca</span>
                        </div>
                    </div>
                    <div class="flight-times">
                        <div class="time-block">
                            <span class="label">Depart</span>
                            <span class="time">06:20</span>
                        </div>
                        <div class="time-block">
                            <span class="label">Arrive</span>
                            <span class="time">09:40</span>
                        </div>
                    </div>
                    <div class="flight-details">
                        <div class="detail">
                            <span class="label">Flight</span>
                            <span class="value">BA2590</span>
                        </div>
                        <div class="detail">
                            <span class="label">Airline</span>
                            <span class="value">BA Euroflyer</span>
                        </div>
                        <div class="detail">
                            <span class="label">Booking Ref</span>
                            <span class="value">Z9IC5E</span>
                        </div>
                    </div>
                    <button class="view-ticket-btn" onclick="viewBoardingPass()">View Boarding Pass</button>
                </div>

                <div class="card flight-card">
                    <div class="card-header">
                        <span class="card-label">Return</span>
                        <span class="card-date">Thu 29 Jan 2026</span>
                    </div>
                    <div class="flight-route">
                        <div class="airport">
                            <span class="code">FLR</span>
                            <span class="city">Florence</span>
                            <span class="terminal">Peretola</span>
                        </div>
                        <div class="flight-line">
                            <span class="plane-icon">‚úà</span>
                        </div>
                        <div class="airport">
                            <span class="code">LGW</span>
                            <span class="city">London Gatwick</span>
                            <span class="terminal"></span>
                        </div>
                    </div>
                    <div class="flight-times">
                        <div class="time-block">
                            <span class="label">Depart</span>
                            <span class="time">13:20</span>
                        </div>
                        <div class="time-block">
                            <span class="label">Arrive</span>
                            <span class="time">14:40</span>
                        </div>
                    </div>
                    <div class="flight-details">
                        <div class="detail">
                            <span class="label">Flight</span>
                            <span class="value">VY6206</span>
                        </div>
                        <div class="detail">
                            <span class="label">Airline</span>
                            <span class="value">Vueling</span>
                        </div>
                        <div class="detail">
                            <span class="label">Booking Ref</span>
                            <span class="value">OEUDNY</span>
                        </div>
                    </div>
                    <div class="boarding-placeholder">
                        <p class="placeholder-msg">Check in online to get boarding pass</p>
                    </div>
                </div>
            </section>

            <!-- Trains Tab -->
            <section id="trains" class="tab-content">
                <div class="card train-card">
                    <div class="card-header">
                        <span class="card-label">Verona ‚Üí Florence</span>
                        <span class="card-date">Tue 27 Jan 2026</span>
                    </div>
                    <div class="flight-route">
                        <div class="airport">
                            <span class="code">VRN</span>
                            <span class="city">Verona Porta Nuova</span>
                        </div>
                        <div class="flight-line train-line">
                            <span class="plane-icon">üöÑ</span>
                        </div>
                        <div class="airport">
                            <span class="code">FI</span>
                            <span class="city">Firenze S.M.N.</span>
                        </div>
                    </div>
                    <div class="flight-times">
                        <div class="time-block">
                            <span class="label">Depart</span>
                            <span class="time">14:22</span>
                        </div>
                        <div class="time-block">
                            <span class="label">Arrive</span>
                            <span class="time">15:54</span>
                        </div>
                    </div>
                    <div class="flight-details">
                        <div class="detail">
                            <span class="label">Train</span>
                            <span class="value">Italo 8959</span>
                        </div>
                        <div class="detail">
                            <span class="label">Coach</span>
                            <span class="value">2</span>
                        </div>
                        <div class="detail">
                            <span class="label">Duration</span>
                            <span class="value">1h 32m</span>
                        </div>
                    </div>
                    <div id="train-ticket">
                        <!-- Button or placeholder added by JS -->
                    </div>
                </div>
            </section>

            <!-- Football Tab -->
            <section id="football" class="tab-content">
                <div class="card match-card verona">
                    <div class="match-header">
                        <div class="club-badge-placeholder verona-badge">HV</div>
                        <div class="match-info">
                            <span class="competition">Serie A</span>
                            <span class="match-title">Hellas Verona vs Udinese</span>
                        </div>
                    </div>
                    <div class="match-details">
                        <div class="detail-row">
                            <span class="icon">üìÖ</span>
                            <span>Mon 26 Jan 2026</span>
                        </div>
                        <div class="detail-row">
                            <span class="icon">‚è∞</span>
                            <span>20:45 kick-off</span>
                        </div>
                        <div class="detail-row">
                            <span class="icon">üèüÔ∏è</span>
                            <span>Stadio Bentegodi, Verona</span>
                        </div>
                    </div>
                    <div class="ticket-info" id="verona-ticket">
                        <!-- Button added by JS for those with tickets -->
                    </div>
                </div>

                <div class="card match-card fiorentina">
                    <div class="match-header">
                        <div class="club-badge-placeholder fiorentina-badge">ACF</div>
                        <div class="match-info">
                            <span class="competition">Coppa Italia Frecciarossa</span>
                            <span class="match-title">Fiorentina vs Como</span>
                        </div>
                    </div>
                    <div class="match-details">
                        <div class="detail-row">
                            <span class="icon">üìÖ</span>
                            <span>Tue 27 Jan 2026</span>
                        </div>
                        <div class="detail-row">
                            <span class="icon">‚è∞</span>
                            <span>21:00 kick-off</span>
                        </div>
                        <div class="detail-row">
                            <span class="icon">üèüÔ∏è</span>
                            <span>Stadio Artemio Franchi, Florence</span>
                        </div>
                    </div>
                    <div class="ticket-info" id="fiorentina-ticket">
                        <!-- Button added by JS for those with tickets -->
                    </div>
                </div>
            </section>

            <!-- Accommodation Tab -->
            <section id="accommodation" class="tab-content">
                <div class="card accommodation-card">
                    <div class="card-header">
                        <span class="card-label">Verona</span>
                        <span class="card-date">26-27 Jan</span>
                    </div>
                    <div class="accommodation-photo verona-photo">
                    </div>
                    <div class="accommodation-details">
                        <h3 class="property-name">Apartment in Verona</h3>
                        <p class="property-address">Via Mazzanti 7, Verona 37121</p>
                        <div class="check-times">
                            <div class="check-block">
                                <span class="label">Check-in</span>
                                <span class="value">15:00</span>
                            </div>
                            <div class="check-block">
                                <span class="label">Check-out</span>
                                <span class="value">TBC</span>
                            </div>
                        </div>
                        <p class="location-note">Right by Piazza Erbe, near Arena di Verona</p>
                    </div>
                    <a href="https://maps.google.com/?q=Via+Mazzanti+7,+Verona+37121,+Italy" target="_blank" class="map-btn">
                        Open in Maps
                    </a>
                </div>

                <div class="card accommodation-card">
                    <div class="card-header">
                        <span class="card-label">Florence</span>
                        <span class="card-date">27-29 Jan</span>
                    </div>
                    <div class="accommodation-photo florence-photo">
                    </div>
                    <div class="accommodation-details">
                        <h3 class="property-name">La Mantellate Dwelling</h3>
                        <p class="property-address">Historic Centre, Florence</p>
                        <div class="check-times">
                            <div class="check-block">
                                <span class="label">Check-in</span>
                                <span class="value">15:00</span>
                            </div>
                            <div class="check-block">
                                <span class="label">Check-out</span>
                                <span class="value">TBC</span>
                            </div>
                        </div>
                        <p class="location-note">Near Fortezza da Basso & the Duomo</p>
                    </div>
                    <a href="https://maps.google.com/?q=La+Mantellate+Florence+Italy" target="_blank" class="map-btn">
                        Open in Maps
                    </a>
                </div>

                <!-- Weather Section -->
                <div class="card info-card">
                    <div class="card-header weather-header">
                        <span class="card-label">Weather Forecast</span>
                    </div>

                    <div class="weather-city-section">
                        <h4 class="weather-city-title">Verona</h4>
                        <div class="weather-grid">
                            <div class="weather-day">
                                <span class="weather-date">Mon 26</span>
                                <span class="weather-icon">‚õÖ</span>
                                <span class="weather-temp-range">3¬∞ / 8¬∞</span>
                                <span class="weather-desc">Partly cloudy</span>
                            </div>
                            <div class="weather-day">
                                <span class="weather-date">Tue 27</span>
                                <span class="weather-icon">üå§Ô∏è</span>
                                <span class="weather-temp-range">2¬∞ / 9¬∞</span>
                                <span class="weather-desc">Mostly sunny</span>
                            </div>
                        </div>
                    </div>

                    <div class="weather-city-section">
                        <h4 class="weather-city-title">Florence</h4>
                        <div class="weather-grid">
                            <div class="weather-day">
                                <span class="weather-date">Tue 27</span>
                                <span class="weather-icon">üå§Ô∏è</span>
                                <span class="weather-temp-range">4¬∞ / 11¬∞</span>
                                <span class="weather-desc">Mostly sunny</span>
                            </div>
                            <div class="weather-day">
                                <span class="weather-date">Wed 28</span>
                                <span class="weather-icon">‚òÄÔ∏è</span>
                                <span class="weather-temp-range">3¬∞ / 12¬∞</span>
                                <span class="weather-desc">Sunny</span>
                            </div>
                            <div class="weather-day">
                                <span class="weather-date">Thu 29</span>
                                <span class="weather-icon">üå§Ô∏è</span>
                                <span class="weather-temp-range">4¬∞ / 10¬∞</span>
                                <span class="weather-desc">Partly cloudy</span>
                            </div>
                        </div>
                    </div>

                    <p class="weather-note">Cold mornings, mild afternoons. Pack layers and a jacket for evening matches!</p>
                </div>
            </section>

            <!-- Costs Tab -->
            <section id="costs" class="tab-content">
                <!-- Sync Status Bar -->
                <div class="sync-bar">
                    <span id="sync-status" class="sync-status">Synced</span>
                    <button id="refresh-expenses" class="refresh-btn">Refresh</button>
                </div>

                <!-- Balance Summary -->
                <div class="card balance-card">
                    <div class="card-header">
                        <span class="card-label">Your Balance</span>
                    </div>
                    <div class="balance-display">
                        <span id="balance-amount" class="balance-amount">-</span>
                        <span id="balance-status" class="balance-status"></span>
                    </div>
                </div>

                <!-- Add Expense Form -->
                <div class="card expense-form-card">
                    <div class="card-header">
                        <span class="card-label">Add Expense</span>
                    </div>
                    <form id="expense-form" class="expense-form">
                        <div class="form-group">
                            <label for="expense-desc">What did you buy?</label>
                            <input type="text" id="expense-desc" placeholder="e.g. Dinner, Taxi, Beers..." required>
                        </div>
                        <div class="form-group">
                            <label for="expense-amount">Amount (‚Ç¨)</label>
                            <input type="number" id="expense-amount" placeholder="0.00" step="0.01" min="0" required>
                        </div>
                        <div class="form-group">
                            <label>Split between</label>
                            <div class="split-options" id="split-options">
                                <label class="split-checkbox">
                                    <input type="checkbox" value="matt" checked>
                                    <span>Matt</span>
                                </label>
                                <label class="split-checkbox">
                                    <input type="checkbox" value="ken" checked>
                                    <span>Ken</span>
                                </label>
                                <label class="split-checkbox">
                                    <input type="checkbox" value="chris" checked>
                                    <span>Chris</span>
                                </label>
                                <label class="split-checkbox">
                                    <input type="checkbox" value="andy" checked>
                                    <span>Andy</span>
                                </label>
                                <label class="split-checkbox">
                                    <input type="checkbox" value="mark" checked>
                                    <span>Mark</span>
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="add-expense-btn">Add Expense</button>
                    </form>
                </div>

                <!-- Expenses List -->
                <div class="card expenses-list-card">
                    <div class="card-header">
                        <span class="card-label">All Expenses</span>
                        <span id="total-spent" class="total-spent">‚Ç¨0.00</span>
                    </div>
                    <div id="expenses-list" class="expenses-list">
                        <p class="no-expenses">No expenses yet</p>
                    </div>
                </div>

                <!-- Settlement Summary -->
                <div class="card settlement-card">
                    <div class="card-header settlement-header">
                        <span class="card-label">Settle Up</span>
                    </div>
                    <div id="settlement-list" class="settlement-list">
                        <p class="no-settlements">Add expenses to see who owes what</p>
                    </div>
                </div>
            </section>

            <!-- BCLC Tab -->
            <section id="bclc" class="tab-content">
                <!-- Game Setup Screen -->
                <div id="bclc-setup" class="bclc-screen active">
                    <div class="card bclc-intro-card">
                        <div class="bclc-logo">
                            <span class="bclc-title">BCLC</span>
                            <span class="bclc-subtitle">Big Cock Little Cock</span>
                        </div>
                        <p class="bclc-tagline">The classic beer mat drinking game, digitised</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <span class="card-label">Who's Playing?</span>
                        </div>
                        <div class="bclc-player-select" id="bclc-player-select">
                            <label class="bclc-player-checkbox">
                                <input type="checkbox" value="matt" checked>
                                <span>Matt</span>
                            </label>
                            <label class="bclc-player-checkbox">
                                <input type="checkbox" value="ken" checked>
                                <span>Ken</span>
                            </label>
                            <label class="bclc-player-checkbox">
                                <input type="checkbox" value="chris" checked>
                                <span>Chris</span>
                            </label>
                            <label class="bclc-player-checkbox">
                                <input type="checkbox" value="andy" checked>
                                <span>Andy</span>
                            </label>
                            <label class="bclc-player-checkbox">
                                <input type="checkbox" value="mark" checked>
                                <span>Mark</span>
                            </label>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <span class="card-label">Choose the Dealer</span>
                            <span class="card-hint">(Goes last)</span>
                        </div>
                        <div class="bclc-dealer-options">
                            <div class="bclc-dealer-mode">
                                <label class="bclc-radio-option active" data-mode="random">
                                    <input type="radio" name="dealer-mode" value="random" checked>
                                    <span class="radio-label">Random</span>
                                </label>
                                <label class="bclc-radio-option" data-mode="select">
                                    <input type="radio" name="dealer-mode" value="select">
                                    <span class="radio-label">Select</span>
                                </label>
                            </div>
                            <div id="bclc-dealer-select" class="bclc-dealer-select hidden">
                                <select id="bclc-dealer-dropdown" class="bclc-dropdown">
                                    <option value="matt">Matt</option>
                                    <option value="ken">Ken</option>
                                    <option value="chris">Chris</option>
                                    <option value="andy">Andy</option>
                                    <option value="mark">Mark</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <button id="bclc-start-btn" class="bclc-start-btn">Start Game</button>
                </div>

                <!-- Game Play Screen -->
                <div id="bclc-game" class="bclc-screen">
                    <div class="bclc-header">
                        <div class="bclc-header-left">
                            <span id="bclc-current-player" class="bclc-current-player">Matt's Turn</span>
                            <span id="bclc-dealer-info" class="bclc-dealer-info">Dealer: Matt</span>
                        </div>
                        <span id="bclc-players-left" class="bclc-players-left">5 left</span>
                    </div>

                    <div class="bclc-cards-area">
                        <div class="bclc-card" id="bclc-card-1" data-flipped="false">
                            <div class="bclc-card-inner">
                                <div class="bclc-card-front" id="bclc-card-1-front"></div>
                                <div class="bclc-card-back" id="bclc-card-1-back"></div>
                            </div>
                        </div>
                        <div class="bclc-card" id="bclc-card-2" data-flipped="false">
                            <div class="bclc-card-inner">
                                <div class="bclc-card-front" id="bclc-card-2-front"></div>
                                <div class="bclc-card-back" id="bclc-card-2-back"></div>
                            </div>
                        </div>
                    </div>

                    <div id="bclc-result" class="bclc-result"></div>

                    <div class="bclc-actions">
                        <button id="bclc-im-out-btn" class="bclc-out-btn">I'm Out!</button>
                        <button id="bclc-next-btn" class="bclc-next-btn" disabled>Next Player</button>
                    </div>

                    <button id="bclc-reset-btn" class="bclc-reset-btn">Reset Game</button>
                </div>

                <!-- Game Over Screen -->
                <div id="bclc-gameover" class="bclc-screen">
                    <div class="card bclc-winner-card">
                        <div class="winner-crown">&#128081;</div>
                        <h2 class="winner-title">Winner!</h2>
                        <span id="bclc-winner-name" class="winner-name">Matt</span>
                        <p class="winner-subtitle">Last one standing!</p>
                    </div>
                    <button id="bclc-play-again-btn" class="bclc-start-btn">Play Again</button>
                </div>
            </section>
        </main>
    </div>

    <!-- PDF Modal -->
    <div id="pdf-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Boarding Pass</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div id="pdf-container" class="pdf-container">
                <!-- PDF rendered here -->
            </div>
        </div>
    </div>

    <script src="./js/app.js"></script>
</body>
</html>
